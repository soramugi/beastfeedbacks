{"version":3,"file":"like/view.js","mappings":";;;;;AAAA,MAAMA,QAAQ,GAAGC,QAAQ,CAACC,gBAAgB,CACzC,+BACD,CAAC;AAEDF,QAAQ,CAACG,OAAO,CAAEC,OAAO,IAAK;EAC7B,MAAMC,KAAK,GAAGD,OAAO,CAACE,OAAO,CAACD,KAAK;EACnC,MAAME,EAAE,GAAGH,OAAO,CAACE,OAAO,CAACC,EAAE;EAC7B,MAAMC,OAAO,GAAGJ,OAAO,CAACK,oBAAoB,CAAC,QAAQ,CAAC;EAEtD,KAAK,MAAMC,MAAM,IAAIF,OAAO,EAAE;IAC7BE,MAAM,CAACC,OAAO,GAAIC,KAAK,IAAK;MAC3BF,MAAM,CAACG,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC;MAErCC,KAAK,CAAC,qCAAqC,EAAE;QAC5CC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACR,cAAc,EAAE;UAChB;QACD,CAAC;;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UACpBC,mBAAmB,EAAE,MAAM;UAC3Bf,KAAK;UACLE;QACD,CAAC;MACF,CAAC,CAAC,CACAc,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACnCF,IAAI,CAAEG,IAAI,IAAK;QACf,IAAIA,IAAI,CAACC,KAAK,EAAE;UACf,MAAMC,UAAU,GAAGtB,OAAO,CAACF,gBAAgB,CAAC,aAAa,CAAC;UAC1D,KAAK,MAAMyB,SAAS,IAAID,UAAU,EAAE;YACnCC,SAAS,CAACC,WAAW,GAAGJ,IAAI,CAACC,KAAK;UACnC;QACD;QAEA,MAAMI,cAAc,GAAG5B,QAAQ,CAAC6B,aAAa,CAAC,MAAM,CAAC;QACrDD,cAAc,CAACD,WAAW,GAAGJ,IAAI,CAACO,OAAO;QACzC3B,OAAO,CAAC4B,aAAa,CAACC,YAAY,CACjCJ,cAAc,EACdzB,OAAO,CAAC8B,WACT,CAAC;MACF,CAAC,CAAC;IACJ,CAAC;EACF;AACD,CAAC,CAAC,C","sources":["webpack://beastfeedbacks/./blocks/src/like/view.js"],"sourcesContent":["const elements = document.querySelectorAll(\n\t\".wp-block-beastfeedbacks-like\",\n);\n\nelements.forEach((element) => {\n\tconst nonce = element.dataset.nonce;\n\tconst id = element.dataset.id;\n\tconst buttons = element.getElementsByTagName(\"button\");\n\n\tfor (const button of buttons) {\n\t\tbutton.onclick = (event) => {\n\t\t\tbutton.setAttribute(\"disabled\", true);\n\n\t\t\tfetch(\"/wp-json/beastfeedbacks/v1/register\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t// \"X-WP-Nonce\": nonce,\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tbeastfeedbacks_type: \"like\",\n\t\t\t\t\tnonce,\n\t\t\t\t\tid,\n\t\t\t\t}),\n\t\t\t})\n\t\t\t\t.then((response) => response.json())\n\t\t\t\t.then((data) => {\n\t\t\t\t\tif (data.count) {\n\t\t\t\t\t\tconst likeCounts = element.querySelectorAll(\".like-count\");\n\t\t\t\t\t\tfor (const likeCount of likeCounts) {\n\t\t\t\t\t\t\tlikeCount.textContent = data.count;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst messageElement = document.createElement(\"span\");\n\t\t\t\t\tmessageElement.textContent = data.message;\n\t\t\t\t\telement.parentElement.insertBefore(\n\t\t\t\t\t\tmessageElement,\n\t\t\t\t\t\telement.nextSibling,\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t};\n\t}\n});\n"],"names":["elements","document","querySelectorAll","forEach","element","nonce","dataset","id","buttons","getElementsByTagName","button","onclick","event","setAttribute","fetch","method","headers","body","JSON","stringify","beastfeedbacks_type","then","response","json","data","count","likeCounts","likeCount","textContent","messageElement","createElement","message","parentElement","insertBefore","nextSibling"],"sourceRoot":""}