{"version":3,"file":"vote/view.js","mappings":";;;;;AAAA,MAAMA,QAAQ,GAAGC,QAAQ,CAACC,gBAAgB,CAAC,+BAA+B,CAAC;AAE3EF,QAAQ,CAACG,OAAO,CAAEC,OAAO,IAAK;EAC7B,MAAMC,KAAK,GAAGD,OAAO,CAACE,OAAO,CAACD,KAAK;EACnC,MAAME,EAAE,GAAGH,OAAO,CAACE,OAAO,CAACC,EAAE;EAC7B,MAAMC,OAAO,GAAGJ,OAAO,CAACK,oBAAoB,CAAC,QAAQ,CAAC;EAEtD,KAAK,MAAMC,MAAM,IAAIF,OAAO,EAAE;IAC7BE,MAAM,CAACC,OAAO,GAAIC,KAAK,IAAK;MAC3B,MAAMC,IAAI,GAAG,EAAE;MACf,KAAK,MAAMC,CAAC,IAAIN,OAAO,EAAE;QACxBM,CAAC,CAACC,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC;QAChCF,IAAI,CAACG,IAAI,CAACF,CAAC,CAACG,WAAW,CAAC;MACzB;MAEAC,KAAK,CAAC,qCAAqC,EAAE;QAC5CC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACR,cAAc,EAAE;UAChB;QACD,CAAC;;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UACpBC,mBAAmB,EAAE,MAAM;UAC3BnB,KAAK;UACLE,EAAE;UACFkB,MAAM,EAAEZ,IAAI;UACZa,QAAQ,EAAEhB,MAAM,CAACO;QAClB,CAAC;MACF,CAAC,CAAC,CACAU,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACnCF,IAAI,CAAEG,IAAI,IAAK;QACf,MAAMC,cAAc,GAAG9B,QAAQ,CAAC+B,aAAa,CAAC,MAAM,CAAC;QACrDD,cAAc,CAACd,WAAW,GAAGa,IAAI,CAACG,OAAO;QACzC7B,OAAO,CAAC8B,aAAa,CAACC,YAAY,CACjCJ,cAAc,EACd3B,OAAO,CAACgC,WACT,CAAC;MACF,CAAC,CAAC;IACJ,CAAC;EACF;AACD,CAAC,CAAC,C","sources":["webpack://beastfeedbacks/./blocks/src/vote/view.js"],"sourcesContent":["const elements = document.querySelectorAll(\".wp-block-beastfeedbacks-vote\");\n\nelements.forEach((element) => {\n\tconst nonce = element.dataset.nonce;\n\tconst id = element.dataset.id;\n\tconst buttons = element.getElementsByTagName(\"button\");\n\n\tfor (const button of buttons) {\n\t\tbutton.onclick = (event) => {\n\t\t\tconst list = [];\n\t\t\tfor (const b of buttons) {\n\t\t\t\tb.setAttribute(\"disabled\", true);\n\t\t\t\tlist.push(b.textContent);\n\t\t\t}\n\n\t\t\tfetch(\"/wp-json/beastfeedbacks/v1/register\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t// \"X-WP-Nonce\": nonce,\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tbeastfeedbacks_type: \"vote\",\n\t\t\t\t\tnonce,\n\t\t\t\t\tid,\n\t\t\t\t\tselect: list,\n\t\t\t\t\tselected: button.textContent,\n\t\t\t\t}),\n\t\t\t})\n\t\t\t\t.then((response) => response.json())\n\t\t\t\t.then((data) => {\n\t\t\t\t\tconst messageElement = document.createElement(\"span\");\n\t\t\t\t\tmessageElement.textContent = data.message;\n\t\t\t\t\telement.parentElement.insertBefore(\n\t\t\t\t\t\tmessageElement,\n\t\t\t\t\t\telement.nextSibling,\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t};\n\t}\n});\n"],"names":["elements","document","querySelectorAll","forEach","element","nonce","dataset","id","buttons","getElementsByTagName","button","onclick","event","list","b","setAttribute","push","textContent","fetch","method","headers","body","JSON","stringify","beastfeedbacks_type","select","selected","then","response","json","data","messageElement","createElement","message","parentElement","insertBefore","nextSibling"],"sourceRoot":""}